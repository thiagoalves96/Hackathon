<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perfil do Usuário</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <main>
      <header>
        <h1>Perfil do Usuário</h1>
      </header>

      <!-- Seção de chat -->
      <section class="chat-section">
        <h2>Health.io - Self check-in</h2>

        <div class="chat-container">
          <div class="chat-box" id="chat-box">
            <div class="message received">Olá! Como posso te ajudar hoje?</div>
          </div>
          <div class="input-box">
            <input type="text" id="user-input" placeholder="Digite sua mensagem..." />
            <button onclick="sendMessage()">Enviar</button>
          </div>
        </div>
      </section>

      <!-- Seção de Mapa -->
      <section class="mapa-unidades">
        <h2>Unidades de Pronto Atendimento Próximas:</h2>
        <div>
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d29252.526538322316!2d-46.68778275063325!3d-23.584032393304096!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1spronto%20socorro%20proximo%20a%20mim!5e0!3m2!1spt-BR!2sbr!4v1749313544674!5m2!1spt-BR!2sbr"
            width="600"
            height="450"
            style="border: 0"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
      </section>
    </main>

    <!-- Rodapé -->
    <footer>
      <p>&copy; 2025 - Health.io</p>
    </footer>

    <script>
      // Função para enviar mensagem
      function sendMessage() {
        const userInput = document.getElementById("user-input").value;
        const chatBox = document.getElementById("chat-box");

        // Adiciona a mensagem do usuário
        if (userInput.trim() !== "") {
          const userMessage = document.createElement("div");
          userMessage.classList.add("message", "sent");
          userMessage.textContent = userInput;
          chatBox.appendChild(userMessage);
        }

        // Resposta do chatbot
        const botMessage = document.createElement("div");
        botMessage.classList.add("message", "received");
        botMessage.textContent = getBotResponse(userInput);
        chatBox.appendChild(botMessage);

        // Limpa o campo de entrada de texto
        document.getElementById("user-input").value = "";

        // Rola para o final da conversa
        chatBox.scrollTop = chatBox.scrollHeight;
      }

      // Função para gerar a resposta do chatbot
      function getBotResponse(userInput) {
        const lowerInput = userInput.toLowerCase();

        // Mensagens predefinidas do chatbot
        if (lowerInput.includes("olá") || lowerInput.includes("oi")) {
          return "Olá! Como posso te ajudar hoje?";
        } else if (lowerInput.includes("ajuda")) {
          return "Claro! Em que posso te ajudar?";
        } else if (lowerInput.includes("preço")) {
          return "Os preços variam, posso te ajudar a encontrar o melhor pacote.";
        } else {
          return "Desculpe, não entendi sua pergunta. Pode reformular?";
        }
      }
    </script>
  </body>
</html>
